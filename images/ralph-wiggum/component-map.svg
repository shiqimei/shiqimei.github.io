<svg viewBox="0 0 700 400" xmlns="http://www.w3.org/2000/svg" style="background:#000;">
  <!-- Title -->
  <text x="350" y="25" font-family="SF Mono, monospace" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">Plugin File Structure &amp; Connections</text>

  <!-- Column Headers -->
  <text x="110" y="55" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">Plugin Files</text>
  <text x="370" y="55" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">Runtime</text>
  <text x="600" y="55" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">State</text>

  <!-- Vertical dividers -->
  <line x1="230" y1="45" x2="230" y2="380" stroke="#333" stroke-width="1" stroke-dasharray="4,4"/>
  <line x1="500" y1="45" x2="500" y2="380" stroke="#333" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- Left column: Plugin files -->
  <rect x="20" y="75" width="190" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="115" y="97" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">commands/</text>
  <text x="115" y="113" font-family="SF Mono, monospace" font-size="8" fill="#666" text-anchor="middle">ralph-loop.md</text>

  <rect x="20" y="145" width="190" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="115" y="167" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">hooks/</text>
  <text x="115" y="183" font-family="SF Mono, monospace" font-size="8" fill="#666" text-anchor="middle">stop-hook.sh</text>

  <rect x="20" y="215" width="190" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="115" y="237" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">scripts/</text>
  <text x="115" y="253" font-family="SF Mono, monospace" font-size="8" fill="#666" text-anchor="middle">setup-ralph-loop.sh</text>

  <rect x="20" y="285" width="190" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="115" y="307" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">commands/</text>
  <text x="115" y="323" font-family="SF Mono, monospace" font-size="8" fill="#666" text-anchor="middle">cancel-ralph.md, help.md</text>

  <!-- Center column: Claude Code Session -->
  <rect x="250" y="100" width="230" height="110" fill="#111" stroke="#fff" stroke-width="2"/>
  <text x="365" y="130" font-family="SF Mono, monospace" font-size="11" fill="#fff" text-anchor="middle">Claude Code Session</text>
  <text x="365" y="150" font-family="SF Mono, monospace" font-size="8" fill="#666" text-anchor="middle">single continuous context</text>
  <line x1="270" y1="165" x2="460" y2="165" stroke="#333" stroke-width="1"/>
  <text x="365" y="185" font-family="SF Mono, monospace" font-size="9" fill="#888" text-anchor="middle">Transcript (stdout)</text>
  <text x="365" y="200" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="middle">piped to stop-hook.sh</text>

  <!-- Right column: State file -->
  <rect x="520" y="85" width="160" height="160" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="600" y="108" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">.claude/</text>
  <text x="600" y="123" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">ralph-loop.local.md</text>
  <line x1="535" y1="133" x2="665" y2="133" stroke="#333" stroke-width="1"/>
  <text x="540" y="153" font-family="SF Mono, monospace" font-size="8" fill="#888">iteration: 3</text>
  <text x="540" y="168" font-family="SF Mono, monospace" font-size="8" fill="#888">max_iterations: 50</text>
  <text x="540" y="183" font-family="SF Mono, monospace" font-size="8" fill="#888">prompt: "..."</text>
  <text x="540" y="198" font-family="SF Mono, monospace" font-size="8" fill="#888">promise: null</text>
  <text x="540" y="218" font-family="SF Mono, monospace" font-size="8" fill="#555">YAML frontmatter</text>

  <!-- Arrows: invokes -->
  <line x1="210" y1="100" x2="245" y2="120" stroke="#555" stroke-width="1"/>
  <polygon points="250,122 237,118 240,128" fill="#555"/>
  <text x="220" y="93" font-family="SF Mono, monospace" font-size="7" fill="#888">invokes</text>

  <!-- Arrow: reads state -->
  <line x1="480" y1="140" x2="515" y2="140" stroke="#555" stroke-width="1"/>
  <polygon points="520,140 507,133 507,147" fill="#555"/>
  <text x="497" y="130" font-family="SF Mono, monospace" font-size="7" fill="#888">reads</text>

  <!-- Arrow: hook writes state -->
  <line x1="210" y1="170" x2="515" y2="210" stroke="#555" stroke-width="1" stroke-dasharray="4,4"/>
  <polygon points="520,211 507,205 508,215" fill="#555"/>
  <text x="360" y="265" font-family="SF Mono, monospace" font-size="7" fill="#888">writes (increment iteration)</text>

  <!-- Arrow: hook reads transcript -->
  <line x1="210" y1="155" x2="245" y2="190" stroke="#555" stroke-width="1"/>
  <polygon points="250,193 237,188 240,198" fill="#555"/>
  <text x="195" y="175" font-family="SF Mono, monospace" font-size="7" fill="#888">reads</text>

  <!-- Dashed loopback: blocks exit -->
  <path d="M 365,210 L 365,310 L 250,310 L 250,170" fill="none" stroke="#555" stroke-width="1" stroke-dasharray="6,4"/>
  <polygon points="250,165 243,178 257,178" fill="#555"/>
  <text x="310" y="355" font-family="SF Mono, monospace" font-size="8" fill="#888">blocks exit (code 2) -&gt; re-feed prompt</text>
</svg>