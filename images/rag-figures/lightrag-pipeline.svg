<svg viewBox="0 0 700 420" xmlns="http://www.w3.org/2000/svg" style="background:#000;">
  <!-- Title -->
  <text x="350" y="25" font-family="SF Mono, monospace" font-size="14" fill="#fff" text-anchor="middle" font-weight="bold">LightRAG Processing Pipeline</text>

  <!-- Indexing Phase Label -->
  <text x="200" y="55" font-family="SF Mono, monospace" font-size="10" fill="#666" text-anchor="middle">INDEXING PHASE (LLM required)</text>
  <line x1="30" y1="62" x2="370" y2="62" stroke="#333" stroke-width="1"/>

  <!-- Step 1: Document -->
  <rect x="30" y="75" width="85" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="72" y="97" font-family="SF Mono, monospace" font-size="11" fill="#fff" text-anchor="middle">Document</text>
  <text x="72" y="112" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">Chunks</text>

  <!-- Arrow 1 -->
  <line x1="115" y1="100" x2="145" y2="100" stroke="#555" stroke-width="2"/>
  <polygon points="155,100 142,93 142,107" fill="#555"/>

  <!-- Step 2: Extract -->
  <rect x="155" y="75" width="85" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="197" y="97" font-family="SF Mono, monospace" font-size="11" fill="#fff" text-anchor="middle">1. Extract</text>
  <text x="197" y="112" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">LLM/chunk</text>

  <!-- Arrow 2 -->
  <line x1="240" y1="100" x2="270" y2="100" stroke="#555" stroke-width="2"/>
  <polygon points="280,100 267,93 267,107" fill="#555"/>

  <!-- Step 3: Store -->
  <rect x="280" y="75" width="85" height="50" fill="#111" stroke="#fff" stroke-width="2"/>
  <text x="322" y="97" font-family="SF Mono, monospace" font-size="11" fill="#fff" text-anchor="middle">2. Store</text>
  <text x="322" y="112" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">3 Backends</text>

  <!-- Query Phase Label -->
  <text x="540" y="55" font-family="SF Mono, monospace" font-size="10" fill="#666" text-anchor="middle">QUERY PHASE (No LLM for retrieval)</text>
  <line x1="400" y1="62" x2="680" y2="62" stroke="#333" stroke-width="1"/>

  <!-- Arrow 3 -->
  <line x1="365" y1="100" x2="415" y2="100" stroke="#555" stroke-width="2"/>
  <polygon points="425,100 412,93 412,107" fill="#555"/>

  <!-- Step 4: Retrieve -->
  <rect x="425" y="75" width="85" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="467" y="97" font-family="SF Mono, monospace" font-size="11" fill="#fff" text-anchor="middle">3. Retrieve</text>
  <text x="467" y="112" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">Vector+Graph</text>

  <!-- Arrow 4 -->
  <line x1="510" y1="100" x2="540" y2="100" stroke="#555" stroke-width="2"/>
  <polygon points="550,100 537,93 537,107" fill="#555"/>

  <!-- Step 5: Generate -->
  <rect x="550" y="75" width="85" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="592" y="97" font-family="SF Mono, monospace" font-size="11" fill="#fff" text-anchor="middle">4. Generate</text>
  <text x="592" y="112" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">Single LLM</text>

  <!-- Storage Section Label -->
  <text x="350" y="150" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">THREE STORAGE BACKENDS</text>

  <!-- KV Storage Box -->
  <rect x="25" y="165" width="210" height="120" fill="#0a0a0a" stroke="#333" stroke-width="1"/>
  <text x="130" y="185" font-family="SF Mono, monospace" font-size="10" fill="#666" text-anchor="middle">KV Storage</text>
  <text x="130" y="198" font-family="SF Mono, monospace" font-size="8" fill="#444" text-anchor="middle">Redis / PostgreSQL / JSON</text>

  <rect x="35" y="210" width="190" height="18" fill="#111" stroke="#333" stroke-width="1"/>
  <text x="45" y="223" font-family="SF Mono, monospace" font-size="8" fill="#555">full_entities: name -> desc</text>

  <rect x="35" y="232" width="190" height="18" fill="#111" stroke="#333" stroke-width="1"/>
  <text x="45" y="245" font-family="SF Mono, monospace" font-size="8" fill="#555">full_relations: pair -> desc</text>

  <rect x="35" y="254" width="190" height="18" fill="#111" stroke="#333" stroke-width="1"/>
  <text x="45" y="267" font-family="SF Mono, monospace" font-size="8" fill="#555">entity_chunks: ent -> [chunks]</text>

  <!-- Vector Storage Box -->
  <rect x="245" y="165" width="210" height="120" fill="#0a0a0a" stroke="#333" stroke-width="1"/>
  <text x="350" y="185" font-family="SF Mono, monospace" font-size="10" fill="#666" text-anchor="middle">Vector Storage</text>
  <text x="350" y="198" font-family="SF Mono, monospace" font-size="8" fill="#444" text-anchor="middle">Milvus / Qdrant / nano-vectordb</text>

  <rect x="255" y="210" width="190" height="18" fill="#111" stroke="#333" stroke-width="1"/>
  <text x="265" y="223" font-family="SF Mono, monospace" font-size="8" fill="#555">[0.23, -0.45, ...] entities</text>

  <rect x="255" y="232" width="190" height="18" fill="#111" stroke="#333" stroke-width="1"/>
  <text x="265" y="245" font-family="SF Mono, monospace" font-size="8" fill="#555">[0.67, 0.21, ...] relations</text>

  <rect x="255" y="254" width="190" height="18" fill="#111" stroke="#333" stroke-width="1"/>
  <text x="265" y="267" font-family="SF Mono, monospace" font-size="8" fill="#555">[0.11, 0.89, ...] chunks</text>

  <!-- Graph Storage Box -->
  <rect x="465" y="165" width="210" height="120" fill="#0a0a0a" stroke="#333" stroke-width="1"/>
  <text x="570" y="185" font-family="SF Mono, monospace" font-size="10" fill="#666" text-anchor="middle">Graph Storage</text>
  <text x="570" y="198" font-family="SF Mono, monospace" font-size="8" fill="#444" text-anchor="middle">Neo4j / NetworkX / PostgreSQL</text>

  <!-- Simple graph visualization -->
  <circle cx="510" cy="240" r="12" fill="#111" stroke="#555" stroke-width="1"/>
  <text x="510" y="244" font-family="SF Mono, monospace" font-size="7" fill="#888" text-anchor="middle">E1</text>

  <circle cx="570" cy="220" r="12" fill="#111" stroke="#555" stroke-width="1"/>
  <text x="570" y="224" font-family="SF Mono, monospace" font-size="7" fill="#888" text-anchor="middle">E2</text>

  <circle cx="630" cy="240" r="12" fill="#111" stroke="#555" stroke-width="1"/>
  <text x="630" y="244" font-family="SF Mono, monospace" font-size="7" fill="#888" text-anchor="middle">E3</text>

  <circle cx="570" cy="265" r="12" fill="#111" stroke="#555" stroke-width="1"/>
  <text x="570" y="269" font-family="SF Mono, monospace" font-size="7" fill="#888" text-anchor="middle">E4</text>

  <!-- Graph edges -->
  <line x1="522" y1="235" x2="558" y2="225" stroke="#444" stroke-width="1"/>
  <line x1="582" y1="225" x2="618" y2="235" stroke="#444" stroke-width="1"/>
  <line x1="570" y1="232" x2="570" y2="253" stroke="#444" stroke-width="1"/>
  <line x1="522" y1="245" x2="558" y2="260" stroke="#444" stroke-width="1"/>

  <!-- Query Mode Section -->
  <rect x="25" y="300" width="650" height="75" fill="#0a0a0a" stroke="#333" stroke-width="1"/>
  <text x="350" y="320" font-family="SF Mono, monospace" font-size="10" fill="#666" text-anchor="middle">QUERY MODES (keywords extracted at query time)</text>

  <text x="130" y="345" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">Local</text>
  <text x="130" y="360" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="middle">low-level keywords</text>

  <text x="350" y="345" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">Global</text>
  <text x="350" y="360" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="middle">high-level keywords</text>

  <text x="570" y="345" font-family="SF Mono, monospace" font-size="9" fill="#fff" text-anchor="middle">Hybrid</text>
  <text x="570" y="360" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="middle">both levels combined</text>

  <!-- Bottom annotation -->
  <text x="350" y="400" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">6000x fewer tokens per query: ~100 tokens vs ~610,000 (GraphRAG)</text>
</svg>
