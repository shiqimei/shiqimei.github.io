<svg viewBox="0 0 700 420" xmlns="http://www.w3.org/2000/svg" style="background:#000;">
  <!-- Title -->
  <text x="350" y="25" font-family="SF Mono, monospace" font-size="13" fill="#fff" text-anchor="middle" font-weight="bold">The Context Stack</text>

  <!-- Layer 4: Agents (top) -->
  <rect x="100" y="50" width="500" height="50" fill="#111" stroke="#fff" stroke-width="2"/>
  <text x="350" y="80" font-family="SF Mono, monospace" font-size="12" fill="#fff" text-anchor="middle">Agents</text>
  <text x="620" y="80" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="end">consume &amp; produce</text>

  <!-- Arrow down -->
  <line x1="350" y1="100" x2="350" y2="120" stroke="#555" stroke-width="1.5"/>
  <polygon points="350,125 346,117 354,117" fill="#555"/>

  <!-- Layer 3: Context Protocol -->
  <rect x="100" y="130" width="500" height="50" fill="#111" stroke="#fff" stroke-width="2"/>
  <text x="350" y="160" font-family="SF Mono, monospace" font-size="12" fill="#fff" text-anchor="middle">Context Protocol</text>
  <text x="620" y="155" font-family="SF Mono, monospace" font-size="8" fill="#888" text-anchor="end">publish, query,</text>
  <text x="620" y="167" font-family="SF Mono, monospace" font-size="8" fill="#888" text-anchor="end">subscribe, invalidate</text>

  <!-- The missing piece bracket -->
  <rect x="102" y="132" width="496" height="46" fill="none" stroke="#fff" stroke-width="1" stroke-dasharray="4,3" opacity="0.3"/>
  <text x="350" y="195" font-family="SF Mono, monospace" font-size="8" fill="#666" text-anchor="middle">^ the missing piece</text>

  <!-- Arrow down -->
  <line x1="350" y1="200" x2="350" y2="215" stroke="#555" stroke-width="1.5"/>
  <polygon points="350,220 346,212 354,212" fill="#555"/>

  <!-- Layer 2: Three retrieval modes side by side -->
  <rect x="100" y="225" width="160" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="180" y="255" font-family="SF Mono, monospace" font-size="10" fill="#fff" text-anchor="middle">Semantic Search</text>

  <rect x="270" y="225" width="160" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="350" y="255" font-family="SF Mono, monospace" font-size="10" fill="#fff" text-anchor="middle">Graph Traversal</text>

  <rect x="440" y="225" width="160" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="520" y="255" font-family="SF Mono, monospace" font-size="10" fill="#fff" text-anchor="middle">Structured Query</text>

  <text x="620" y="248" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="end">retrieval modes</text>

  <!-- Arrow down -->
  <line x1="350" y1="275" x2="350" y2="295" stroke="#555" stroke-width="1.5"/>
  <polygon points="350,300 346,292 354,292" fill="#555"/>

  <!-- Layer 1: Storage Engines -->
  <rect x="100" y="305" width="120" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="160" y="335" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">Postgres</text>

  <rect x="230" y="305" width="120" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="290" y="335" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">Vector DB</text>

  <rect x="360" y="305" width="120" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="420" y="335" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">Redis</text>

  <rect x="490" y="305" width="110" height="50" fill="#111" stroke="#444" stroke-width="1"/>
  <text x="545" y="335" font-family="SF Mono, monospace" font-size="10" fill="#888" text-anchor="middle">Object Store</text>

  <text x="620" y="328" font-family="SF Mono, monospace" font-size="8" fill="#555" text-anchor="end">storage engines</text>

  <!-- Bottom annotation -->
  <text x="350" y="385" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">Postgres stores the bits.</text>
  <text x="350" y="400" font-family="SF Mono, monospace" font-size="9" fill="#666" text-anchor="middle">The protocol gives them meaning, relevance, and liveness.</text>
</svg>